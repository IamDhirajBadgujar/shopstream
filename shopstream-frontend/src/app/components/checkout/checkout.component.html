<div class="checkout-container">
  <h2 class="checkout-title">Checkout</h2>

  <ng-container *ngIf="items$ | async as items">
    <!-- Empty cart -->
    <div *ngIf="items.length === 0" class="empty-cart">
      <p>Your cart is empty.</p>
      <a routerLink="/" class="shop-link">Go shopping</a>
    </div>

    <!-- Checkout content -->
    <div *ngIf="items.length > 0" class="checkout-card">
      
      <!-- Order summary -->
      <div class="order-summary">
        <h3>Order Summary</h3>

        <div
          class="order-item"
          *ngFor="let i of items; trackBy: trackByProductId"
        >
          <span class="item-name">
            {{ i.name }} × {{ i.qty }}
          </span>
          <span class="item-price">
            ₹{{ (i.price || 0) * (i.qty || 0) }}
          </span>
        </div>
      </div>

      <!-- Address -->
      <div class="address-section">
        <label for="address">Shipping Address</label>
        <textarea
          id="address"
          rows="3"
          [(ngModel)]="address"
          placeholder="Enter your full delivery address"
        ></textarea>
      </div>

      <!-- Total -->
      <div class="total-section">
        <span>Total</span>
        <strong>₹{{ total }}</strong>
      </div>

      <!-- Action -->
      <button
        class="place-order-btn"
        (click)="placeOrder()"
        [disabled]="loading"
      >
        {{ loading ? 'Placing order...' : 'Place Order' }}
      </button>

      <!-- Error -->
      <div *ngIf="error" class="error-box">
        {{ error }}
      </div>

    </div>
  </ng-container>
</div>
